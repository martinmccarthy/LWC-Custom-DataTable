<template>
    <div class={isStepSelected}>
        <lightning-card class="slds-p-around_small">
            <div class="slds-p-around_x-small">
                <div class="slds-border_bottom">
                    <slot onclick={handleStepSelect} name="header"></slot>
                    <label class="slds-text-heading_large">{step.title}</label>
                    <lightning-button-group class="slds-float_right">
                        <lightning-button class="deleteBtn" icon-name="utility:delete" alternative-text="Delete" title="Delete" variant="base" onclick={deleteStep}></lightning-button><br/>
                        <lightning-button icon-name="utility:relate" alternative-text="Replicate" title="Replicate" variant="base" onclick={replicateStep}></lightning-button><br/>
                        <lightning-button onclick={handleExpand} icon-name={expandedIcon} alternative-text="Show More"></lightning-button>
                    </lightning-button-group>
                    <br/>
                    <label>Step</label>
                    <br/>
                </div>
                <template if:true={isExpanded}>
                    <lightning-layout multiple-rows ondrop={addElement} ondragover={allowDrop} style="height:20rem;overflow:auto;">
                        <!-- container for all dropable items -->
                        <lightning-layout-item size="12">
                            <lightning-layout multiple-rows>
                                    <template for:each={step.elements} for:item="element" for:index="index">
                                        <template if:true={element.isVisible}>
                                            <lightning-layout-item key={element.id} size="12" draggable="true" ondragover={handleDragover} ondragstart={handleDrag} ondrop={handleDrop} title={index}>
                                                <c-element class="slds-p-around_xxx-small" element-selected-id={elementSelectedId} element={element}></c-element>
                                            </lightning-layout-item>
                                        </template>
                                    </template>
                            </lightning-layout>
                        </lightning-layout-item>
                    </lightning-layout>
                    <!--<br /><label>{step.fieldLabel}</label><br />
                    <lightning-button label={step.buttonLabel} onclick={clickHandler} variant={step.buttonVariant}></lightning-button> -->
                </template>
            </div>
        </lightning-card>
    </div>
</template>