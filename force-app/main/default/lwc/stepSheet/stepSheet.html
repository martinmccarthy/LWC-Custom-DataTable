<template>
    <lightning-layout>
        <lightning-layout-item size="8" padding="around-small" ondrop={dropElement} ondragover={allowDrop}>
        <lightning-layout-item>
            <lightning-button label="Hide/Show Conditional Items" onclick={checkVisibility}></lightning-button>
        </lightning-layout-item>
            <lightning-layout multiple-rows class="list">
                <template for:each={steps} for:item="step" for:index="index">
                    <lightning-layout-item key={step.id} padding="around-small" size="12">
                        <template if:true={step.isVisible}>
                            <template if:true={step.isStep}>
                                <c-step step={step} class="slds-p-around_xx-small" step-selected-id={selectedStepId} element-selected-id={selectedElementId} all-steps={steps}>
                                    <div slot="header" draggable="true" title={index} ondrop={handleDrop} ondragover={handleDragover} ondragstart={handleDrag} class="slot" onclick={stepSelectHandler}></div>
                                </c-step>
                            </template>
                            <template if:false={step.isStep}>
                                <c-element element-selected-id={selectedElementId} element={step}>
                                    <div slot="header" draggable="true" title={index} ondrop={handleDrop} ondragover={handleDragover} ondragstart={handleDrag} class="slot" onclick={elementSelectHandler}></div>
                                </c-element>
                            </template>
                        </template>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
        </lightning-layout-item>
        <lightning-layout-item size="4" padding="around-small">
            <c-step-builder oncommunicateelsave={stepSavedHandler} oncommunicatesave={stepSavedHandler} all-steps={steps}></c-step-builder>
        </lightning-layout-item>
    </lightning-layout>
</template>